<!doctype html>
<html lang="fr">
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Parlios Génie du Marché — Preview Offline</title>
<link rel="stylesheet" href="../../styles/base.css"/>
<body>
<div class="container">
  <h1>Parlios Génie du Marché — Preview</h1>
  <p aria-live="polite">Idées de campagnes / canaux / accroches (mock-IA local) — 0 API.</p>
  <div class="grid-2">
    <div>
      <label>Objectif</label><select id="goal"><option>Trafic</option><option>Leads</option><option>Ventes</option><option>Notoriété</option></select>
      <label>Canal</label><select id="channel"><option>Instagram</option><option>LinkedIn</option><option>Email</option><option>Landing page</option></select>
      <label>Ton</label><select id="tone"><option>pro</option><option>friendly</option><option>fun</option><option>direct</option></select>
      <div class="row" style="margin-top:12px">
        <button id="btn" class="primary">Générer 5 idées</button>
        <button id="btnCSV">Export CSV</button>
      </div>
    </div>
    <div><div id="out" class="output"></div></div>
  </div>
  <p><a href="../../index.html"><button>Retour au Hub</button></a></p>
</div>
<script type="module">
import { generateVariants } from "../../lib/mock_ai.js";
import { exportCSV } from "../../lib/exporters.js";
const $=s=>document.querySelector(s);
let last=[];
$("#btn").addEventListener("click",()=>{
  const seed=Date.now();
  const tone=$("#tone").value;
  last = generateVariants({seed,tone,goal:"generic",count:5,length:"short"});
  $("#out").innerHTML = last.map((v,i)=>`<div>- ${v}</div>`).join("");
});
$("#btnCSV").addEventListener("click",()=>{
  if(!last.length) return;
  const rows = [["Index","Idée"]].concat(last.map((x,i)=>[i+1,x]));
  exportCSV(`parlios-market-genius-${Date.now()}.csv`, rows);
});
</script>
</body>
</html>
