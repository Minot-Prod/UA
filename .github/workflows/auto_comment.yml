name: UA Bot â€“ Auto Comment on Cleanup PR

on:
  pull_request:
    types: [opened, reopened]
    branches:
      - main

jobs:
  auto-comment:
    if: contains(github.event.pull_request.title, 'chore(ua-cleanup'))
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - name: Add cleanup reminder comment
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          PR_NUMBER: ${{ github.event.pull_request.number }}
          REPO: ${{ github.repository }}
        run: |
          gh api \
            repos/${REPO}/issues/${PR_NUMBER}/comments \
            -f body='### ðŸ¤– UA Bot â€“ Post-merge Reminder

Merci dâ€™avoir lancÃ© le nettoyage sÃ©curisÃ© ðŸ§¹  
Une fois cette PR fusionnÃ©e :

1. AccÃ¨de Ã  **Actions â†’ Cleanup Artifacts (manual)**  
2. Clique sur **Run workflow**  
3. Renseigne la variable `keep_days` (par dÃ©faut : `7`)  
   â†’ Cela supprimera automatiquement les artifacts CI/CD plus anciens que 7 jours.

ðŸ’¡ _Ce workflow ne touche pas aux fichiers sources et peut Ãªtre relancÃ© Ã  tout moment._'
